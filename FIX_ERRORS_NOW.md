# üîß –ò—Å–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫–∏ 400 –∏ 406

## –ü—Ä–æ–±–ª–µ–º–∞

- ‚ùå 400 Bad Request - –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –∑–∞–ø—Ä–æ—Å–∞ –∫ spaces
- ‚ùå 406 Not Acceptable - –ø—Ä–æ–±–ª–µ–º–∞ —Å RLS policies

## ‚úÖ –†–µ—à–µ–Ω–∏–µ (2 –º–∏–Ω—É—Ç—ã)

### –®–∞–≥ 1: –ò—Å–ø—Ä–∞–≤–∏—Ç—å RLS Policies –≤ Supabase

1. –û—Ç–∫—Ä–æ–π—Ç–µ [Supabase SQL Editor](https://supabase.com/dashboard/project/ihivunmndpsysxdtedti/sql/new)
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ `supabase/fix-all-policies.sql`
3. –í—Å—Ç–∞–≤—å—Ç–µ –≤ SQL Editor
4. –ù–∞–∂–º–∏—Ç–µ **Run** (–∏–ª–∏ Ctrl+Enter)
5. –î–æ–∂–¥–∏—Ç–µ—Å—å —Å–æ–æ–±—â–µ–Ω–∏—è "‚úÖ –í—Å–µ RLS policies –æ–±–Ω–æ–≤–ª–µ–Ω—ã!"

### –®–∞–≥ 2: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ dev —Å–µ—Ä–≤–µ—Ä (Ctrl+C)
npm run dev
```

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å

–û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:5173 –∏ –≤–æ–π–¥–∏—Ç–µ:
```
Email: zhenya@twodo.app
Password: Zhenya2025!
```

–û—à–∏–±–∫–∏ 400 –∏ 406 –¥–æ–ª–∂–Ω—ã –∏—Å—á–µ–∑–Ω—É—Ç—å! ‚úÖ

---

## üîç –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### –í –∫–æ–¥–µ (lib/useSupabaseData.ts):
- ‚úÖ –£–±—Ä–∞–Ω—ã –ø–æ–¥–∑–∞–ø—Ä–æ—Å—ã `select space_id from space_members`
- ‚úÖ –ó–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã —Å JOIN

### –í –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö (RLS policies):
- ‚úÖ –£–ø—Ä–æ—â–µ–Ω—ã policies –¥–ª—è spaces
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ policy –¥–ª—è INSERT –≤ users
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã policies –¥–ª—è –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü

---

## üêõ –ï—Å–ª–∏ –≤—Å—ë –µ—â—ë –µ—Å—Ç—å –æ—à–∏–±–∫–∏

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞

–ù–∞–∂–º–∏—Ç–µ F12 ‚Üí Console –∏ –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ –æ—à–∏–±–∫–∏.

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞–Ω

```sql
SELECT * FROM auth.users WHERE email = 'zhenya@twodo.app';
SELECT * FROM public.users WHERE name = '–ñ–µ–Ω—è';
SELECT * FROM public.spaces WHERE owner_id IN (
  SELECT id FROM public.users WHERE name = '–ñ–µ–Ω—è'
);
```

–î–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø–æ 1 –∑–∞–ø–∏—Å–∏ –≤ –∫–∞–∂–¥–æ–π —Ç–∞–±–ª–∏—Ü–µ.

### –û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à –±—Ä–∞—É–∑–µ—Ä–∞

1. F12 ‚Üí Application ‚Üí Storage ‚Üí Clear site data
2. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É (Ctrl+Shift+R)

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ

- `supabase/fix-all-policies.sql` - –ü–æ–ª–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö policies
- `lib/useSupabaseData.ts` - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –∫–æ–¥ –∑–∞–ø—Ä–æ—Å–æ–≤
- `CREATE_ZHENYA_NOW.md` - –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –Ω—É–ª—è
